define("modules/tools/imageloader.jsx",function(t,i,n){"use strict";var e=t("modules/conf.jsx").BANNER_NUM,s=t("modules/conf.jsx").ITEM_NUM,o=function(t,i,n){this.done=t,this.success=i,this.fail=n,this.init()};o.prototype={init:function(){this.bannerNum=e,this.itemNum=s,this.total=this.bannerNum+this.itemNum,this.loader()},loader:function(){for(var t=this.bannerNum,i=this.itemNum;--t>=0;)this.loadImage(this.getBannerUrl(t),!0);for(;--i>=0;)this.loadImage(this.getItemUrl(i),!1)},getBannerUrl:function(t){return"img/banner/banner"+t+".jpg"},getItemUrl:function(t){return"img/item/item"+t+".jpg"},dealNum:function(t){t?--this.bannerNum:--this.itemNum},checkDone:function(){0===this.itemNum&&0===this.bannerNum&&this.done(this.total)},loadImage:function(t,i){var n=new Image;n.onload=function(){this.dealNum(i),this.success(this.total,this.total-this.itemNum-this.bannerNum),this.checkDone()}.bind(this),n.onerror=function(){this.dealNum(i),this.fail(this.total,this.total-this.itemNum-this.bannerNum),this.checkDone()}.bind(this),n.src=t}},n.exports=o});